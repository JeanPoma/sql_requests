-- ============================================
-- EXERCICE: Score moyen par genre et plateforme
-- NIVEAU: ðŸŸ¡ IntermÃ©diaire
-- CONCEPTS: GROUP BY multi-colonnes, jointures multiples, HAVING
--
-- ðŸ“š Ressources SQLZoo recommandÃ©es :
-- - Tutorial 5 : https://sqlzoo.net/wiki/SUM_and_COUNT
-- - Tutorial 6 : https://sqlzoo.net/wiki/The_JOIN_operation
--
-- ðŸŽ¯ OBJECTIF PÃ‰DAGOGIQUE:
-- MaÃ®triser GROUP BY avec plusieurs colonnes pour crÃ©er des agrÃ©gations
-- Ã  plusieurs dimensions, combinÃ© avec des jointures multiples.
--
-- ðŸ’¡ RAPPEL DE SYNTAXE:
-- SELECT col1, col2, AVG(col3) AS moyenne, COUNT(*) AS total
-- FROM table1
-- JOIN table2 ON ...
-- WHERE condition
-- GROUP BY col1, col2
-- HAVING total >= seuil
-- ORDER BY moyenne DESC;
--
-- ============================================
-- CONSIGNE:
-- Calculez, pour chaque couple (genre, plateforme), le Metacritic moyen
-- et le nombre de jeux.
--
-- Colonnes attendues: genre, platform, meta_avg, n_games
--
-- Jointures nÃ©cessaires:
-- - games -> game_genres -> genres (pour obtenir le nom du genre)
-- - games -> game_platforms -> platforms (pour obtenir le code plateforme)
--
-- Filtres: metacritic IS NOT NULL
-- AgrÃ©gation: AVG(metacritic) AS meta_avg, COUNT(*) AS n_games
-- HAVING: n_games >= 20 (exclure les combinaisons avec peu de jeux)
-- Ordre: meta_avg DESC, n_games DESC
-- Limit: 50
--
-- ðŸ’¡ ASTUCE SCHÃ‰MA:
-- games (id, metacritic)
--   â†“ game_genres (game_id, genre_id)
--   â†“ genres (id, name)
--   â†“ game_platforms (game_id, platform_id)
--   â†“ platforms (id, code)
--
-- ðŸ’¡ POURQUOI HAVING ?
-- HAVING filtre APRÃˆS l'agrÃ©gation (contrairement Ã  WHERE qui filtre AVANT).
-- On l'utilise pour filtrer sur des rÃ©sultats d'agrÃ©gats (COUNT, AVG, etc.)
-- ============================================
